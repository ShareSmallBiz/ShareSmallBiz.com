@{
    ViewData["Title"] = "Discussions";
    var user = User.Identity;
}

<div class="container mt-4">
    <h2 class="text-center mb-4">
        <i class="bi bi-chat-dots-fill"></i> Discussions
    </h2>

    @if (user != null && user.IsAuthenticated)
    {
        <div class="text-center mb-4">
            <a href="/Forum/Post/create" class="btn btn-primary btn-lg">
                <i class="bi bi-chat-dots me-2"></i> Create Discussion
            </a>
        </div>
    }

    <!-- Full-width Navigation Bar -->
    <div class="d-flex justify-content-center mb-4">
        <div class="btn-group" role="group">
            <!-- Most Popular Button -->
            <button class="btn btn-outline-primary" onclick="loadPosts('/Discussions/popular/10')">
                <i class="bi bi-trophy-fill me-2"></i> Most Popular
            </button>

            <!-- Most Comments Button -->
            <button class="btn btn-outline-warning" onclick="loadPosts('/Discussions/commented/10')">
                <i class="bi bi-chat-left-dots-fill me-2"></i> Most Comments
            </button>

            <!-- Recent Posts Button -->
            <button class="btn btn-outline-success" onclick="loadPosts('/Discussions/recent/10')">
                <i class="bi bi-clock-fill me-2"></i> Recent 
            </button>
        </div>
        @if (user != null && user.IsAuthenticated)
        {
            <button class="btn btn-outline-info" onclick="loadPosts('/Discussions/my/10')">
                <i class="bi bi-person-lines-fill me-2"></i> Mine
            </button>
        }
    </div>

    <!-- Posts Container -->
    <div id="postsContainer" class="list-group"></div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            loadPosts('/Discussions/recent/10');
        });

        function loadPosts(endpoint) {
            $.get(endpoint, function (data) {
                $("#postsContainer").html(data);
            });
        }
    </script>
}
